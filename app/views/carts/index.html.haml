%main.container.general-main-wrap
  %h1.general-title-margin Cart
  .visible-xs
    = form_for current_order, url: cart_path(current_order), method: :put do |f|
      - current_order.order_items.each do |item|
        .general-cart-item.divider-lg-bottom
          %button.close.general-cart-close{type: "button", 'aria-label': "Close"}
            %span{'aria-hidden': "true"} &times;
          .general-img-wrap-table
            %img.cart-img-shadow.width-full{src: "#{item.book.pictures.first.image.url}", alt: "#{item.book.title}"}
          %p.general-title #{item.book.title}
          %table.table
            %tr
              %td
                %span.in-grey-600 Price
              %td
                %span.font-16.in-gold-500 €#{item.book.price}
            %tr
              %td.vertical-middle
                %span.in-grey-600 Quantity
              %td
                = fields_for 'order_items[]', item do |field|
                  .input-group
                    %a.input-link{href: "#"}
                      %i.fa.fa-minus.line-height-40
                    = field.text_field :quantity, class: 'form-control quantity-input', min: 1, value: "#{item.quantity}"
                    %a.input-link{href: "#"}
                      %i.fa.fa-plus.line-height-40
            %tr
              %td
                %span.in-grey-600 SubTotal
              %td
                %span.font-16.in-gold-500 €#{item.quantity * item.book.price}
            = f.submit "Update cart", class: "btn btn-primary mb-15 res-block"
      .col-sm-8
        .res-mr-200.text-center.general-text-right
          %p.in-gold-500.font-18 Order Summary
          %table.general-summary-table.general-summary-table-right.general-text-right
            = render partial: '/checkout/summary'
  .hidden-xs
    = form_for current_order, url: cart_path(current_order), method: :put do |f|
      %table.table.table-hover
        %tr.no-hover
          %th.col-pic.pl-0
            %span.in-grey-600 Product
          %th.col-title
          %th.col-price
            %span.in-grey-600 Price
          %th.col-quantity
            %span.in-grey-600 Quantity
          %th.col-total
            %span.in-grey-600 SubTotal
          %th.col-close
        - current_order.order_items.each do |item|
          %tr
            %td
              .general-img-wrap-table
                %img.cart-img-shadow.pull-left.width-full{src: "#{item.book.pictures.first.image.url}", alt: "#{item.book.title}"}
            %td
              %p.general-title #{item.book.title}
            %td
              %span.font-16.in-gold-500 €#{item.book.price}
            %td
              = fields_for 'order_items[]', item do |field|
                .input-group
                  %a.input-link{href: "#"}
                    %i.fa.fa-minus.line-height-40
                  = field.text_field :quantity, class: 'form-control quantity-input', min: 1, value: "#{item.quantity}"
                  %a.input-link{href: "#"}
                    %i.fa.fa-plus.line-height-40
            %td
              %span.font-16.in-gold-500 €#{item.quantity * item.book.price}
            %td
              %a.close.general-cart-close{'aria-label': "Close", href: order_item_path(item.id), 'data-method': 'delete'}
                %span{'aria-hidden': "true"} &times;
            %button.close.general-cart-close{type: "button", 'aria-label': "Close"}
      .general-order-wrap
        .row
          .col-sm-4
            .input-group.general-input-group
              %label.font-weight-light Enter Your Coupon Code
              = f.text_field :coupon, {class: "form-control mb-30", placeholder: "Enter Your Coupon Code", value: current_order.coupon ? current_order.coupon.code : ''}
              %div
                = f.submit "Update cart", class: "btn btn-primary mb-15 res-block"
          .col-sm-8
            .res-mr-200.text-center.general-text-right
              %p.in-gold-500.font-18 Order Summary
              %table.general-summary-table.general-summary-table-right.general-text-right
                = render partial: '/checkout/summary'
  = button_to "Checkout",  checkout_index_path, method: :get, class: "btn btn-default mb-20 visible-xs-inline-block"
  = button_to "Checkout",  checkout_index_path, method: :get, class: "btn btn-default mb-20 hidden-xs center-block"
